'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
const getClassConstructor = (ConstructHandler, CreationHandler) => {
    return class extends ConstructHandler {
        constructor(...args) {
            const answer = super(...args);
            return CreationHandler.call(this, answer);
        }
    };
};
const getFunctionConstructor = (ConstructHandler, CreationHandler) => {
    const newable = Object.hasOwnProperty.call(ConstructHandler, 'prototype');
    return function (...args) {
        let answer;
        if (!newable) {
            answer = ConstructHandler.call(this, ...args);
        }
        else {
            const _proto = ConstructHandler.prototype;
            ConstructHandler.prototype = this.constructor.prototype;
            answer = new ConstructHandler(...args);
            ConstructHandler.prototype = _proto;
        }
        return CreationHandler.call(this, answer);
    };
};
const compileNewModificatorFunctionBody = function (FunctionName, asClass = false) {
    return function (ConstructHandler, CreationHandler, SymbolConstructorName) {
        return function () {
            let ModificationBody;
            if (asClass) {
                ModificationBody = getClassConstructor(ConstructHandler, CreationHandler);
            }
            else {
                ModificationBody = getFunctionConstructor(ConstructHandler, CreationHandler);
            }
            ModificationBody.prototype.constructor = ModificationBody;
            Object.defineProperty(ModificationBody.prototype.constructor, 'name', {
                value: FunctionName,
                writable: false
            });
            Object.defineProperty(ModificationBody, SymbolConstructorName, {
                get() {
                    return FunctionName;
                }
            });
            return ModificationBody;
        };
    };
};
exports.default = compileNewModificatorFunctionBody;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcGlsZU5ld01vZGlmaWNhdG9yRnVuY3Rpb25Cb2R5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2FwaS90eXBlcy9jb21waWxlTmV3TW9kaWZpY2F0b3JGdW5jdGlvbkJvZHkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOztBQWtDYixNQUFNLG1CQUFtQixHQUFHLENBQUUsZ0JBQXFCLEVBQUUsZUFBb0IsRUFBSSxFQUFFO0lBQzlFLE9BQU8sS0FBTSxTQUFRLGdCQUFnQjtRQUNwQyxZQUFjLEdBQUcsSUFBVztZQUMzQixNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUUsR0FBRyxJQUFJLENBQUUsQ0FBQztZQUVoQyxPQUFPLGVBQWUsQ0FBQyxJQUFJLENBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBRSxDQUFDO1FBQzdDLENBQUM7S0FDRCxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxzQkFBc0IsR0FBRyxDQUFFLGdCQUFxQixFQUFFLGVBQW9CLEVBQUksRUFBRTtJQUNqRixNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBRSxnQkFBZ0IsRUFBRSxXQUFXLENBQUUsQ0FBQztJQUU1RSxPQUFPLFVBQXNCLEdBQUcsSUFBVztRQUMxQyxJQUFJLE1BQU0sQ0FBQztRQUtYLElBQUssQ0FBQyxPQUFPLEVBQUcsQ0FBQztZQUNoQixNQUFNLEdBQUcsZ0JBQWdCLENBQUMsSUFBSSxDQUFFLElBQUksRUFBRSxHQUFHLElBQUksQ0FBRSxDQUFDO1FBQ2pELENBQUM7YUFBTSxDQUFDO1lBQ1AsTUFBTSxNQUFNLEdBQUcsZ0JBQWdCLENBQUMsU0FBUyxDQUFDO1lBQzFDLGdCQUFnQixDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQztZQUV4RCxNQUFNLEdBQUcsSUFBSSxnQkFBZ0IsQ0FBRSxHQUFHLElBQUksQ0FBRSxDQUFDO1lBQ3pDLGdCQUFnQixDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7UUFDckMsQ0FBQztRQUNELE9BQU8sZUFBZSxDQUFDLElBQUksQ0FBRSxJQUFJLEVBQUUsTUFBTSxDQUFFLENBQUM7SUFDN0MsQ0FBQyxDQUFDO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxpQ0FBaUMsR0FBRyxVQUFXLFlBQW9CLEVBQUUsT0FBTyxHQUFHLEtBQUs7SUFDekYsT0FBTyxVQUFXLGdCQUFxQixFQUFFLGVBQW9CLEVBQUUscUJBQTZCO1FBQzNGLE9BQU87WUFDTixJQUFJLGdCQUFxQixDQUFDO1lBQzFCLElBQUssT0FBTyxFQUFHLENBQUM7Z0JBQ2YsZ0JBQWdCLEdBQUcsbUJBQW1CLENBQUUsZ0JBQWdCLEVBQUUsZUFBZSxDQUFFLENBQUM7WUFDN0UsQ0FBQztpQkFBTSxDQUFDO2dCQUlQLGdCQUFnQixHQUFHLHNCQUFzQixDQUFFLGdCQUFnQixFQUFFLGVBQWUsQ0FBRSxDQUFDO1lBQ2hGLENBQUM7WUFDRCxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsV0FBVyxHQUFHLGdCQUFnQixDQUFDO1lBQzFELE1BQU0sQ0FBQyxjQUFjLENBQUUsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRSxNQUFNLEVBQUU7Z0JBQ3RFLEtBQUssRUFBTSxZQUFZO2dCQUN2QixRQUFRLEVBQUcsS0FBSzthQUNoQixDQUFFLENBQUM7WUFDSixNQUFNLENBQUMsY0FBYyxDQUFFLGdCQUFnQixFQUFFLHFCQUFxQixFQUFFO2dCQUMvRCxHQUFHO29CQUVGLE9BQU8sWUFBWSxDQUFDO2dCQUNyQixDQUFDO2FBQ0QsQ0FBRSxDQUFDO1lBQ0osT0FBTyxnQkFBZ0IsQ0FBQztRQUN6QixDQUFDLENBQUM7SUFDSCxDQUFDLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixrQkFBZSxpQ0FBaUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLypcblxuLy8gaXQgaXMgbm90IHRoYXQgZWFzeVxuLy8gY29uc3RydWN0b3IgbmFtZSBkaWFwcGVhcnMgd2hlbiB5b3UgbG9vayBvbiAndGhpcydcbi8vIHVzaW5nIENocm9tZSBEZXYgdG9vbHMgZGVidWdnZXIgZm9yIGV4YW1wbGVcbi8vIGFkZGluZyAnZGVidWdnZXI7JyBrZXl3b3JkIG5leHQgbGluZSB0byBcbi8vICdjb25zdCBhbnN3ZXIgPSAnIHNlZSBleGFtcGxlIGRvd24gYmVsb3dcblxuLy8gdGhvdWdodCBmb3IgY29uc29sZS5sb2cgaXQgaXMgdGhlcmVcblxuLy8gQWxzbywgYXMgaXQgaXMgd3JpdHRlbiBoZXJlXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9GdW5jdGlvbi9uYW1lXG5cbi8vIHRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiBtaWdodCBiZSBvYmZ1c2NhdGVkIGR1cmluZyBidW5kbGluZ1xuLy8gdGhlcmVmb3JlIGl0IHNlZW1zIHRvIGJlIG1vcmUgY29ycmVjdCB0byBpbXBsZW1lbnQgdXNpbmcgJ25ldyBGdW5jdGlvbidcblxuLy8gdGhlcmVmb3JlIGNvbnNpZGVyaW5nIHdlIGhhdmUgb3BlbiBidWcgbm93OlxuLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MTM1MDQwNFxuLy8gcmVsYXRlZCB0byB0aGUgbGlua3MgYmVsb3dcbi8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3dlbnRvdXQvNWRjZGQzNGY5MjY0NjBkODljOGMxNTUyZDFiYmMzZDdcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Z1bmN0aW9uL25hbWVcblxuLy8gd2Ugd2lsbCB1c2UgbmV4dCBzb2x1dGlvbiBhcyB3b3JraW5nIGNvZGVcbi8vIGJlY2F1c2UgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lIGtlcHQgT0tcbi8vIGp1c3QgdGhlIGJ1ZyBpcyBmb3IgQ2hyb21lIERldiBUb29sc1xuXG4vLyBhbmQgYXMgcHJlbGltaW5hcnkgY29tcGlsZWQgZnVuY3Rpb25zIHNvbHV0aW9uIHdvcmtzIGZhc3RlclxuLy8gYW5kIGRvZXMgbm90IHJlcXVpcmUgbmV3IGNvZGUgY29tcGlsYXRpb25cbi8vIHdlIHdpbGwga2VlcCBpdCBmdXJ0aGVyXG5cbiovXG5cbmNvbnN0IGdldENsYXNzQ29uc3RydWN0b3IgPSAoIENvbnN0cnVjdEhhbmRsZXI6IGFueSwgQ3JlYXRpb25IYW5kbGVyOiBhbnksICkgPT4ge1xuXHRyZXR1cm4gY2xhc3MgZXh0ZW5kcyBDb25zdHJ1Y3RIYW5kbGVyIHtcblx0XHRjb25zdHJ1Y3RvciAoIC4uLmFyZ3M6IGFueVtdICkge1xuXHRcdFx0Y29uc3QgYW5zd2VyID0gc3VwZXIoIC4uLmFyZ3MgKTtcblx0XHRcdC8vIGRlYnVnZ2VyO1xuXHRcdFx0cmV0dXJuIENyZWF0aW9uSGFuZGxlci5jYWxsKCB0aGlzLCBhbnN3ZXIgKTtcblx0XHR9XG5cdH07XG59O1xuXG5jb25zdCBnZXRGdW5jdGlvbkNvbnN0cnVjdG9yID0gKCBDb25zdHJ1Y3RIYW5kbGVyOiBhbnksIENyZWF0aW9uSGFuZGxlcjogYW55LCApID0+IHtcblx0Y29uc3QgbmV3YWJsZSA9IE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKCBDb25zdHJ1Y3RIYW5kbGVyLCAncHJvdG90eXBlJyApO1xuXHQvLyBjb25zdCBoYXNSZXR1cm5TdGF0ZW1lbnQgPSBDb25zdHJ1Y3RIYW5kbGVyLnRvU3RyaW5nKCkuaW5kZXhPZigncmV0dXJuJykgPiAtMTtcblx0cmV0dXJuIGZ1bmN0aW9uICggdGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSApIHtcblx0XHRsZXQgYW5zd2VyO1xuXHRcdC8vIGlmICghbmV3LnRhcmdldCkge1xuXHRcdC8vIFx0ZGVidWdnZXI7XG5cdFx0Ly8gfVxuXHRcdC8vIGlmIChoYXNSZXR1cm5TdGF0ZW1lbnQgfHwgIW5ld2FibGUpIHtcblx0XHRpZiAoICFuZXdhYmxlICkge1xuXHRcdFx0YW5zd2VyID0gQ29uc3RydWN0SGFuZGxlci5jYWxsKCB0aGlzLCAuLi5hcmdzICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IF9wcm90byA9IENvbnN0cnVjdEhhbmRsZXIucHJvdG90eXBlO1xuXHRcdFx0Q29uc3RydWN0SGFuZGxlci5wcm90b3R5cGUgPSB0aGlzLmNvbnN0cnVjdG9yLnByb3RvdHlwZTtcblx0XHRcdC8vIE9iamVjdC5zZXRQcm90b3R5cGVPZihDb25zdHJ1Y3RIYW5kbGVyLnByb3RvdHlwZSwgT2JqZWN0LmNyZWF0ZSh0aGlzLmNvbnN0cnVjdG9yLnByb3RvdHlwZSkpO1xuXHRcdFx0YW5zd2VyID0gbmV3IENvbnN0cnVjdEhhbmRsZXIoIC4uLmFyZ3MgKTtcblx0XHRcdENvbnN0cnVjdEhhbmRsZXIucHJvdG90eXBlID0gX3Byb3RvO1xuXHRcdH1cblx0XHRyZXR1cm4gQ3JlYXRpb25IYW5kbGVyLmNhbGwoIHRoaXMsIGFuc3dlciApO1xuXHR9O1xufTtcblxuY29uc3QgY29tcGlsZU5ld01vZGlmaWNhdG9yRnVuY3Rpb25Cb2R5ID0gZnVuY3Rpb24gKCBGdW5jdGlvbk5hbWU6IHN0cmluZywgYXNDbGFzcyA9IGZhbHNlICkge1xuXHRyZXR1cm4gZnVuY3Rpb24gKCBDb25zdHJ1Y3RIYW5kbGVyOiBhbnksIENyZWF0aW9uSGFuZGxlcjogYW55LCBTeW1ib2xDb25zdHJ1Y3Rvck5hbWU6IHN5bWJvbCApOiBhbnkge1xuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRsZXQgTW9kaWZpY2F0aW9uQm9keTogYW55O1xuXHRcdFx0aWYgKCBhc0NsYXNzICkge1xuXHRcdFx0XHRNb2RpZmljYXRpb25Cb2R5ID0gZ2V0Q2xhc3NDb25zdHJ1Y3RvciggQ29uc3RydWN0SGFuZGxlciwgQ3JlYXRpb25IYW5kbGVyICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBjb25zdCBSZU5hbWVkQ29uc3RydWN0SGFuZGxlciA9IHt9IGFzIGFueTtcblx0XHRcdFx0Ly8gUmVOYW1lZENvbnN0cnVjdEhhbmRsZXJbRnVuY3Rpb25OYW1lXSA9IENvbnN0cnVjdEhhbmRsZXI7XG5cdFx0XHRcdC8vIE1vZGlmaWNhdGlvbkJvZHkgPSBnZXRGdW5jdGlvbkNvbnN0cnVjdG9yKFJlTmFtZWRDb25zdHJ1Y3RIYW5kbGVyW0Z1bmN0aW9uTmFtZV0sIENyZWF0aW9uSGFuZGxlcik7XG5cdFx0XHRcdE1vZGlmaWNhdGlvbkJvZHkgPSBnZXRGdW5jdGlvbkNvbnN0cnVjdG9yKCBDb25zdHJ1Y3RIYW5kbGVyLCBDcmVhdGlvbkhhbmRsZXIgKTtcblx0XHRcdH1cblx0XHRcdE1vZGlmaWNhdGlvbkJvZHkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTW9kaWZpY2F0aW9uQm9keTtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggTW9kaWZpY2F0aW9uQm9keS5wcm90b3R5cGUuY29uc3RydWN0b3IsICduYW1lJywge1xuXHRcdFx0XHR2YWx1ZSAgICA6IEZ1bmN0aW9uTmFtZSxcblx0XHRcdFx0d3JpdGFibGUgOiBmYWxzZVxuXHRcdFx0fSApO1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCBNb2RpZmljYXRpb25Cb2R5LCBTeW1ib2xDb25zdHJ1Y3Rvck5hbWUsIHtcblx0XHRcdFx0Z2V0ICgpIHtcblx0XHRcdFx0XHQvLyByZXR1cm4gbmV3IFN0cmluZyggRnVuY3Rpb25OYW1lICk7XG5cdFx0XHRcdFx0cmV0dXJuIEZ1bmN0aW9uTmFtZTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdFx0cmV0dXJuIE1vZGlmaWNhdGlvbkJvZHk7XG5cdFx0fTtcblx0fTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBpbGVOZXdNb2RpZmljYXRvckZ1bmN0aW9uQm9keTtcblxuXG4vKlxuXG4vLyBob3dldmVyLCBmb3IgYmV0dGVyIHVuZGVyc3RhbmRpbmcgb2Ygd2hhdCBpcyBnb2luZyBvbiBoZXJlXG4vLyBJJ2QgbGlrZSB0byBwcm92aWRlIFxuXG5jb25zdCBjb21waWxlTmV3TW9kaWZpY2F0b3JGdW5jdGlvbkJvZHkgPSBmdW5jdGlvbiAoIEZ1bmN0aW9uTmFtZTogc3RyaW5nLCBhc0NsYXNzID0gZmFsc2UgKSB7XG5cblx0Y29uc3QgZHQgPSBgJHtEYXRlLm5vdygpfV8ke2Ake01hdGgucmFuZG9tKCl9YC5zcGxpdCggJy4nIClbIDEgXX1gO1xuXG5cdGNvbnN0IG1vZFN0cmluZyA9IGFzQ2xhc3MgP1xuXG5cdFx0YGNsYXNzICR7RnVuY3Rpb25OYW1lfSBleHRlbmRzIENvbnN0cnVjdEhhbmRsZXJfJHtkdH0ge1xuXHRcdFx0Y29uc3RydWN0b3IoLi4uYXJncykge1xuXHRcdFx0XHRjb25zdCBhbnN3ZXIgPSBzdXBlciguLi5hcmdzKTtcblx0XHRcdFx0cmV0dXJuIENyZWF0aW9uSGFuZGxlcl8ke2R0fS5jYWxsKHRoaXMsIGFuc3dlcik7XG5cdFx0XHR9XG5cdFx0fWBcblxuXHRcdDpcblxuXHRcdGBjb25zdCAke0Z1bmN0aW9uTmFtZX0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuXHRcdFx0Y29uc3QgbmV3YWJsZSA9IE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKCBDb25zdHJ1Y3RIYW5kbGVyXyR7ZHR9LCAncHJvdG90eXBlJyApO1xuXHRcdFx0bGV0IGFuc3dlcjtcblx0XHRcdGlmICggIW5ld2FibGUgKSB7XG5cdFx0XHRcdGFuc3dlciA9IENvbnN0cnVjdEhhbmRsZXJfJHtkdH0uY2FsbCggdGhpcywgLi4uYXJncyApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgX3Byb3RvID0gQ29uc3RydWN0SGFuZGxlcl8ke2R0fS5wcm90b3R5cGU7XG5cdFx0XHRcdENvbnN0cnVjdEhhbmRsZXJfJHtkdH0ucHJvdG90eXBlID0gdGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG5cdFx0XHRcdGFuc3dlciA9IG5ldyBDb25zdHJ1Y3RIYW5kbGVyXyR7ZHR9KCAuLi5hcmdzICk7XG5cdFx0XHRcdENvbnN0cnVjdEhhbmRsZXJfJHtkdH0ucHJvdG90eXBlID0gX3Byb3RvO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIENyZWF0aW9uSGFuZGxlcl8ke2R0fS5jYWxsKCB0aGlzLCBhbnN3ZXIgKTtcblx0XHR9O2A7XG5cblx0cmV0dXJuIG5ldyBGdW5jdGlvbiggYENvbnN0cnVjdEhhbmRsZXJfJHtkdH1gLCBgQ3JlYXRpb25IYW5kbGVyXyR7ZHR9YCwgJ1N5bWJvbENvbnN0cnVjdG9yTmFtZScsXG5cdFx0YHJldHVybiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdCR7bW9kU3RyaW5nfVxuXG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoJHtGdW5jdGlvbk5hbWV9LCBTeW1ib2xDb25zdHJ1Y3Rvck5hbWUsIHtcblx0XHRcdFx0Z2V0ICgpIHtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IFN0cmluZyggJyR7RnVuY3Rpb25OYW1lfScgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiAke0Z1bmN0aW9uTmFtZX07XG5cblx0XHR9O1xuXHRgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBpbGVOZXdNb2RpZmljYXRvckZ1bmN0aW9uQm9keTtcblxuKi9cbiJdfQ==