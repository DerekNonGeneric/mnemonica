'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
exports.defineStackCleaner = exports.utils = exports.errors = exports.defaultCollection = exports.createTypesCollection = exports.ErrorMessages = exports.TYPE_TITLE_PREFIX = exports.URANUS = exports.GAIA = exports.MNEMOSYNE = exports.MNEMONICA = exports.SymbolConfig = exports.SymbolDefaultTypesCollection = exports.SymbolReplaceUranus = exports.SymbolGaia = exports.SymbolConstructorName = exports.SymbolParentType = exports.mnemonica = exports.registerHook = exports.decorate = exports.bind = exports.call = exports.apply = exports.lookup = exports.define = exports.defaultTypes = exports.setProps = exports.getProps = void 0;
var Props_1 = require("./api/types/Props");
Object.defineProperty(exports, "getProps", { enumerable: true, get: function () { return Props_1.getProps; } });
Object.defineProperty(exports, "setProps", { enumerable: true, get: function () { return Props_1.setProps; } });
const constants_1 = require("./constants");
const { odp } = constants_1.constants;
const errorsApi = require("./api/errors");
const descriptors_1 = require("./descriptors");
const Mnemosyne_1 = require("./api/types/Mnemosyne");
const { prepareSubtypeForConstruction } = Mnemosyne_1.default;
exports.defaultTypes = descriptors_1.descriptors.defaultTypes;
function checkThis(pointer) {
    return pointer === exports.mnemonica || pointer === exports;
}
const define = function (TypeName, constructHandler, config) {
    const types = checkThis(this) ? exports.defaultTypes : this || exports.defaultTypes;
    return types.define(TypeName, constructHandler, config);
};
exports.define = define;
exports.lookup = function (TypeNestedPath) {
    const types = checkThis(this) ? exports.defaultTypes : this || exports.defaultTypes;
    return types.lookup(TypeNestedPath);
};
const $run = function (entity, Constructor, args = []) {
    const Cstr = prepareSubtypeForConstruction(Constructor.TypeName, entity);
    if (!Cstr) {
        throw new TypeError(`Type ${Constructor.TypeName} is not defined in the current context.`);
    }
    const result = new Cstr(...args);
    return result;
};
const apply = function (entity, Constructor, args = []) {
    return $run(entity, Constructor, args);
};
exports.apply = apply;
const call = function (entity, Constructor, ...args) {
    return $run(entity, Constructor, args);
};
exports.call = call;
const bind = function (entity, Constructor) {
    return (...args) => {
        return $run(entity, Constructor, args);
    };
};
exports.bind = bind;
const decorate = function (parentClass = undefined, config) {
    const decorator = function (cstr, s) {
        if (parentClass === undefined) {
            return (0, exports.define)(s.name, cstr, config);
        }
        return parentClass.define(s.name, cstr, config);
    };
    return decorator;
};
exports.decorate = decorate;
const registerHook = function (Constructor, hookType, cb) {
    Constructor.registerHook(hookType, cb);
};
exports.registerHook = registerHook;
exports.mnemonica = Object.entries(Object.assign(Object.assign(Object.assign({ define: exports.define,
    lookup: exports.lookup,
    apply: exports.apply,
    call: exports.call,
    bind: exports.bind,
    decorate: exports.decorate,
    registerHook: exports.registerHook }, descriptors_1.descriptors), errorsApi), constants_1.constants)).reduce((acc, entry) => {
    const [name, code] = entry;
    odp(acc, name, {
        get() {
            return code;
        },
        enumerable: true
    });
    return acc;
}, {});
exports.SymbolParentType = exports.mnemonica.SymbolParentType, exports.SymbolConstructorName = exports.mnemonica.SymbolConstructorName, exports.SymbolGaia = exports.mnemonica.SymbolGaia, exports.SymbolReplaceUranus = exports.mnemonica.SymbolReplaceUranus, exports.SymbolDefaultTypesCollection = exports.mnemonica.SymbolDefaultTypesCollection, exports.SymbolConfig = exports.mnemonica.SymbolConfig, exports.MNEMONICA = exports.mnemonica.MNEMONICA, exports.MNEMOSYNE = exports.mnemonica.MNEMOSYNE, exports.GAIA = exports.mnemonica.GAIA, exports.URANUS = exports.mnemonica.URANUS, exports.TYPE_TITLE_PREFIX = exports.mnemonica.TYPE_TITLE_PREFIX, exports.ErrorMessages = exports.mnemonica.ErrorMessages, exports.createTypesCollection = exports.mnemonica.createTypesCollection;
exports.defaultCollection = exports.defaultTypes.subtypes;
exports.errors = descriptors_1.descriptors.ErrorsTypes;
var utils_1 = require("./utils");
Object.defineProperty(exports, "utils", { enumerable: true, get: function () { return utils_1.utils; } });
var utils_2 = require("./utils");
Object.defineProperty(exports, "defineStackCleaner", { enumerable: true, get: function () { return utils_2.defineStackCleaner; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsWUFBWSxDQUFDOzs7QUFhYiwyQ0FBd0Q7QUFBOUMsaUdBQUEsUUFBUSxPQUFBO0FBQUUsaUdBQUEsUUFBUSxPQUFBO0FBRTVCLDJDQUF3QztBQUN4QyxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcscUJBQVMsQ0FBQztBQUUxQiwwQ0FBMEM7QUFDMUMsK0NBQTRDO0FBRTVDLHFEQUErQztBQUMvQyxNQUFNLEVBQUUsNkJBQTZCLEVBQUUsR0FBRyxtQkFBVSxDQUFDO0FBR3BELG9CQUFZLEdBQ1QseUJBQVcsY0FBQztBQUVoQixTQUFTLFNBQVMsQ0FBRyxPQUFvRDtJQUN4RSxPQUFPLE9BQU8sS0FBSyxpQkFBUyxJQUFJLE9BQU8sS0FBSyxPQUFPLENBQUM7QUFDckQsQ0FBQztBQUVNLE1BQU0sTUFBTSxHQUFHLFVBYXJCLFFBQWlCLEVBQ2pCLGdCQUEwQixFQUMxQixNQUEyQjtJQUUzQixNQUFNLEtBQUssR0FBRyxTQUFTLENBQUUsSUFBSSxDQUFFLENBQUMsQ0FBQyxDQUFDLG9CQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxvQkFBWSxDQUFDO0lBQ3RFLE9BQU8sS0FBSyxDQUFDLE1BQU0sQ0FBRSxRQUFRLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxDQUFFLENBQUM7QUFDM0QsQ0FBQyxDQUFDO0FBbkJXLFFBQUEsTUFBTSxVQW1CakI7QUFFVyxRQUFBLE1BQU0sR0FBRyxVQUFXLGNBQWM7SUFDOUMsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFFLElBQUksQ0FBRSxDQUFDLENBQUMsQ0FBQyxvQkFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksb0JBQVksQ0FBQztJQUN0RSxPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUUsY0FBYyxDQUFFLENBQUM7QUFDdkMsQ0FBZSxDQUFDO0FBR2hCLE1BQU0sSUFBSSxHQUFJ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QWFsQixpQkFBUyx3QkFaWixrQkFBVSxHQVlQLGlCQUFTLGFBWFosMkJBQW1CLEdBV2hCLGlCQUFTLHNCQVZaLG9DQUE0QixHQVV6QixpQkFBUywrQkFUWixvQkFBWSxHQVNULGlCQUFTLGVBUlosaUJBQVMsR0FRTixpQkFBUyxZQVBaLGlCQUFTLEdBT04saUJBQVMsWUFOWixZQUFJLEdBTUQsaUJBQVMsT0FMWixjQUFNLEdBS0gsaUJBQVMsU0FKWix5QkFBaUIsR0FJZCxpQkFBUyxvQkFIWixxQkFBYSxHQUdWLGlCQUFTLGdCQUZaLDZCQUFxQixHQUVsQixpQkFBUyx1QkFBQztBQUdELFFBQUEsaUJBQWlCLEdBQUcsb0JBQVksQ0FBQyxRQUFRLENBQUM7QUFDMUMsUUFBQSxNQUFNLEdBQUcseUJBQVcsQ0FBQyxXQUFXLENBQUM7QUFFOUMsaUNBQWdDO0FBQXZCLDhGQUFBLEtBQUssT0FBQTtBQUNkLGlDQUE2QztBQUFwQywyR0FBQSxrQkFBa0IsT0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudCwgaW5kZW50LCBuZXctY2FwLCBzcGFjZS1iZWZvcmUtZnVuY3Rpb24tcGFyZW4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHtcblx0VHlwZUxvb2t1cCxcblx0SURFRixcblx0aG9vayxcblx0aG9va3NUeXBlcyxcblx0Y29uc3RydWN0b3JPcHRpb25zLFxuXHRQcm90byxcblx0U04sXG5cdElEZWZpbml0b3JJbnN0YW5jZVxufSBmcm9tICcuL3R5cGVzJztcbmV4cG9ydCB0eXBlIHsgSURFRiwgQ29uc3RydWN0b3JGdW5jdGlvbiB9IGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0IHsgIGdldFByb3BzLCBzZXRQcm9wcyB9IGZyb20gJy4vYXBpL3R5cGVzL1Byb3BzJztcblxuaW1wb3J0IHsgY29uc3RhbnRzIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuY29uc3QgeyBvZHAgfSA9IGNvbnN0YW50cztcblxuaW1wb3J0ICogYXMgZXJyb3JzQXBpIGZyb20gJy4vYXBpL2Vycm9ycyc7XG5pbXBvcnQgeyBkZXNjcmlwdG9ycyB9IGZyb20gJy4vZGVzY3JpcHRvcnMnO1xuXG5pbXBvcnQgbW5lbW9zeW5lcyBmcm9tICcuL2FwaS90eXBlcy9NbmVtb3N5bmUnO1xuY29uc3QgeyBwcmVwYXJlU3VidHlwZUZvckNvbnN0cnVjdGlvbiB9ID0gbW5lbW9zeW5lcztcblxuZXhwb3J0IGNvbnN0IHtcblx0ZGVmYXVsdFR5cGVzLFxufSA9IGRlc2NyaXB0b3JzO1xuXG5mdW5jdGlvbiBjaGVja1RoaXMgKCBwb2ludGVyOiB0eXBlb2YgbW5lbW9uaWNhIHwgdHlwZW9mIGV4cG9ydHMgfCB1bmtub3duICk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gcG9pbnRlciA9PT0gbW5lbW9uaWNhIHx8IHBvaW50ZXIgPT09IGV4cG9ydHM7XG59XG5cbmV4cG9ydCBjb25zdCBkZWZpbmUgPSBmdW5jdGlvbiA8XG5cdFQsXG5cdC8vIEsgZXh0ZW5kcyBJREVGPFQ+LFxuXHQvLyBIIGV4dGVuZHMgVGhpc1R5cGU8SURFRjxUPj4sXG5cdFAgZXh0ZW5kcyBvYmplY3QsXG5cdE4gZXh0ZW5kcyBQcm90bzxQLCBUPixcblx0Ly8gc28gUyBpdCBqdXN0IGJhc2ljYWxseSBhbGxvd3MgbmVzdGVkIGNvbnN0cnVjdG9yc1xuXHQvLyBhbmQgZ2l2ZXMgZXh0cmFjdGVkIHByb3BzIGZyb20gY29uc3RydWN0SGFuZGxlciAmIHByb3RvXG5cdC8vIHRoZW4gaXQgZ29lcyB0byBuZXcoKSBrZXl3b3JkIG9mIGRlZmluZSBvdXRwdXRcblx0UyBleHRlbmRzIFNOICYgTixcblx0UiBleHRlbmRzIElEZWZpbml0b3JJbnN0YW5jZTxOLCBTPlxuPiAoXG5cdHRoaXM6IHVua25vd24sXG5cdFR5cGVOYW1lPzogc3RyaW5nLFxuXHRjb25zdHJ1Y3RIYW5kbGVyPzogSURFRjxUPixcblx0Y29uZmlnPzogY29uc3RydWN0b3JPcHRpb25zLFxuKTogUiB7XG5cdGNvbnN0IHR5cGVzID0gY2hlY2tUaGlzKCB0aGlzICkgPyBkZWZhdWx0VHlwZXMgOiB0aGlzIHx8IGRlZmF1bHRUeXBlcztcblx0cmV0dXJuIHR5cGVzLmRlZmluZSggVHlwZU5hbWUsIGNvbnN0cnVjdEhhbmRsZXIsIGNvbmZpZyApO1xufTtcblxuZXhwb3J0IGNvbnN0IGxvb2t1cCA9IGZ1bmN0aW9uICggVHlwZU5lc3RlZFBhdGggKSB7XG5cdGNvbnN0IHR5cGVzID0gY2hlY2tUaGlzKCB0aGlzICkgPyBkZWZhdWx0VHlwZXMgOiB0aGlzIHx8IGRlZmF1bHRUeXBlcztcblx0cmV0dXJuIHR5cGVzLmxvb2t1cCggVHlwZU5lc3RlZFBhdGggKTtcbn0gYXMgVHlwZUxvb2t1cDtcblxuXG5jb25zdCAkcnVuID0gIGZ1bmN0aW9uIDxFIGV4dGVuZHMgb2JqZWN0LCBUIGV4dGVuZHMgb2JqZWN0LCBTIGV4dGVuZHMgUHJvdG88RSwgVD4+ICggZW50aXR5OiBFLCBDb25zdHJ1Y3RvcjogSURFRjxUPiwgYXJnczogdW5rbm93bltdID0gW10gKToge1xuXHRbIGtleSBpbiBrZXlvZiBTIF06IFNbIGtleSBdXG59IHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyXG5cdC8vIGRlYnVnZ2VyO1xuXHQvLyBAdHMtaWdub3JlXG5cdGNvbnN0IENzdHIgPSBwcmVwYXJlU3VidHlwZUZvckNvbnN0cnVjdGlvbihDb25zdHJ1Y3Rvci5UeXBlTmFtZSwgZW50aXR5KTtcblx0aWYgKCFDc3RyKSB7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYFR5cGUgJHtDb25zdHJ1Y3Rvci5UeXBlTmFtZX0gaXMgbm90IGRlZmluZWQgaW4gdGhlIGN1cnJlbnQgY29udGV4dC5gKTtcblx0fVxuXHRjb25zdCByZXN1bHQgPSBuZXcgQ3N0ciguLi5hcmdzKTtcblx0Ly8gQHRzLWlnbm9yZVxuXHRyZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGNvbnN0IGFwcGx5ID0gZnVuY3Rpb24gPEUgZXh0ZW5kcyBvYmplY3QsIFQgZXh0ZW5kcyBvYmplY3QsIFMgZXh0ZW5kcyBQcm90bzxFLCBUPj4gKCBlbnRpdHk6IEUsIENvbnN0cnVjdG9yOiBJREVGPFQ+LCBhcmdzOiB1bmtub3duW10gPSBbXSApOiB7XG5cdFsga2V5IGluIGtleW9mIFMgXTogU1sga2V5IF1cbn0ge1xuXHRyZXR1cm4gJHJ1bjxFLCBULCBTPiggZW50aXR5LCBDb25zdHJ1Y3RvciwgYXJncyApO1xufTtcblxuZXhwb3J0IGNvbnN0IGNhbGwgPSBmdW5jdGlvbiA8RSBleHRlbmRzIG9iamVjdCwgVCBleHRlbmRzIG9iamVjdCwgUyBleHRlbmRzIFByb3RvPEUsIFQ+PiAoIGVudGl0eTogRSwgQ29uc3RydWN0b3I6IElERUY8VD4sIC4uLmFyZ3M6IHVua25vd25bXSApOiB7XG5cdFsga2V5IGluIGtleW9mIFMgXTogU1sga2V5IF1cbn0ge1xuXHRyZXR1cm4gJHJ1bjxFLCBULCBTPiggZW50aXR5LCBDb25zdHJ1Y3RvciwgYXJncyApO1xufTtcblxuZXhwb3J0IGNvbnN0IGJpbmQgPSBmdW5jdGlvbiA8RSBleHRlbmRzIG9iamVjdCwgVCBleHRlbmRzIG9iamVjdCwgUyBleHRlbmRzIFByb3RvPEUsIFQ+PiAoIGVudGl0eTogRSwgQ29uc3RydWN0b3I6IElERUY8VD4gKTogKCAuLi5hcmdzOiB1bmtub3duW10gKSA9PiB7XG5cdFsga2V5IGluIGtleW9mIFMgXTogU1sga2V5IF1cbn0ge1xuXHRyZXR1cm4gKCAuLi5hcmdzICkgPT4ge1xuXHRcdHJldHVybiAkcnVuPEUsIFQsIFM+KCBlbnRpdHksIENvbnN0cnVjdG9yLCBhcmdzICk7XG5cdH07XG59O1xuXG5leHBvcnQgY29uc3QgZGVjb3JhdGUgPSBmdW5jdGlvbiAoIHBhcmVudENsYXNzOiB1bmtub3duID0gdW5kZWZpbmVkLCBjb25maWc/OiBjb25zdHJ1Y3Rvck9wdGlvbnMgKSB7XG5cdGNvbnN0IGRlY29yYXRvciA9IGZ1bmN0aW9uIDxUIGV4dGVuZHMgeyBuZXcoKTogdW5rbm93biB9PiAoIGNzdHI6IFQsIHM6IENsYXNzRGVjb3JhdG9yQ29udGV4dDxUPiApOiBUIHtcblx0XHRpZiAoIHBhcmVudENsYXNzID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRyZXR1cm4gZGVmaW5lKCBzLm5hbWUsIGNzdHIsIGNvbmZpZyApIGFzIHVua25vd24gYXMgVCA7XG5cdFx0fVxuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRyZXR1cm4gcGFyZW50Q2xhc3MuZGVmaW5lKCBzLm5hbWUsIGNzdHIsIGNvbmZpZyApIGFzIHVua25vd24gYXMgVDtcblx0fTtcblx0cmV0dXJuIGRlY29yYXRvcjtcbn07XG5cbmV4cG9ydCBjb25zdCByZWdpc3Rlckhvb2sgPSBmdW5jdGlvbiA8VCBleHRlbmRzIG9iamVjdD4gKCBDb25zdHJ1Y3RvcjogSURFRjxUPiwgaG9va1R5cGU6IGhvb2tzVHlwZXMsIGNiOiBob29rICk6IHZvaWQge1xuXHQvLyBAdHMtaWdub3JlXG5cdENvbnN0cnVjdG9yLnJlZ2lzdGVySG9vayggaG9va1R5cGUsIGNiICk7XG59O1xuXG5leHBvcnQgY29uc3QgbW5lbW9uaWNhID0gT2JqZWN0LmVudHJpZXMoIHtcblxuXHRkZWZpbmUsXG5cdGxvb2t1cCxcblx0YXBwbHksXG5cdGNhbGwsXG5cdGJpbmQsXG5cdGRlY29yYXRlLFxuXHRyZWdpc3Rlckhvb2ssXG5cblx0Li4uZGVzY3JpcHRvcnMsXG5cblx0Li4uZXJyb3JzQXBpLFxuXHQuLi5jb25zdGFudHMsXG5cbn0gKS5yZWR1Y2UoICggYWNjOiB7IFsgaW5kZXg6IHN0cmluZyBdOiB1bmtub3duIH0sIGVudHJ5OiBbIHN0cmluZywgdW5rbm93biBdICkgPT4ge1xuXHRjb25zdCBbIG5hbWUsIGNvZGUgXSA9IGVudHJ5O1xuXHRvZHAoIGFjYywgbmFtZSwge1xuXHRcdGdldCAoKSB7XG5cdFx0XHRyZXR1cm4gY29kZTtcblx0XHR9LFxuXHRcdGVudW1lcmFibGUgOiB0cnVlXG5cdH0gKTtcblx0cmV0dXJuIGFjYztcbn0sIHt9ICk7XG5cbmV4cG9ydCBjb25zdCB7XG5cblx0U3ltYm9sUGFyZW50VHlwZSxcblx0U3ltYm9sQ29uc3RydWN0b3JOYW1lLFxuXHRTeW1ib2xHYWlhLFxuXHRTeW1ib2xSZXBsYWNlVXJhbnVzLFxuXHRTeW1ib2xEZWZhdWx0VHlwZXNDb2xsZWN0aW9uLFxuXHRTeW1ib2xDb25maWcsXG5cdE1ORU1PTklDQSxcblx0TU5FTU9TWU5FLFxuXHRHQUlBLFxuXHRVUkFOVVMsXG5cdFRZUEVfVElUTEVfUFJFRklYLFxuXHRFcnJvck1lc3NhZ2VzLFxuXHRjcmVhdGVUeXBlc0NvbGxlY3Rpb24sXG5cbn0gPSBtbmVtb25pY2E7XG5cblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRDb2xsZWN0aW9uID0gZGVmYXVsdFR5cGVzLnN1YnR5cGVzO1xuZXhwb3J0IGNvbnN0IGVycm9ycyA9IGRlc2NyaXB0b3JzLkVycm9yc1R5cGVzO1xuXG5leHBvcnQgeyB1dGlscyB9IGZyb20gJy4vdXRpbHMnO1xuZXhwb3J0IHsgZGVmaW5lU3RhY2tDbGVhbmVyIH0gZnJvbSAnLi91dGlscyc7XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudCwgaW5kZW50LCBuZXctY2FwLCBzcGFjZS1iZWZvcmUtZnVuY3Rpb24tcGFyZW4gKi9cbiJdfQ==